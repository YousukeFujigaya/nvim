# キーバインド完全リファレンス

このドキュメントでは、Modern Neovim Configurationで利用可能な全てのキーバインドを詳しく説明します。

## 📋 目次

- [基本概念](#基本概念)
- [リーダーキー](#リーダーキー)
- [基本操作](#基本操作)
- [ファイル・バッファ操作](#ファイル・バッファ操作)
- [ウィンドウ管理](#ウィンドウ管理)
- [LSP機能](#lsp機能)
- [Git操作](#git操作)
- [ターミナル](#ターミナル)
- [デバッグ](#デバッグ)
- [編集機能](#編集機能)
- [検索・ナビゲーション](#検索・ナビゲーション)
- [UI操作](#ui操作)
- [プラグイン管理](#プラグイン管理)

## 基本概念

### モード説明
- **ノーマルモード** (`n`): デフォルトモード、移動や操作
- **インサートモード** (`i`): テキスト入力
- **ビジュアルモード** (`v`): テキスト選択
- **ビジュアルラインモード** (`V`): 行単位選択
- **コマンドモード** (`c`): コマンドライン
- **ターミナルモード** (`t`): ターミナル内

### 記法説明
- `<leader>` : スペースキー
- `<C-x>` : Ctrl + x
- `<S-x>` : Shift + x  
- `<A-x>` : Alt + x (Option on Mac)
- `<F1>` : ファンクションキー

## リーダーキー

**リーダーキー**: `<Space>` (スペースキー)

リーダーキーは多くのカスタムコマンドのプレフィックスとして使用されます。

## 基本操作

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<Esc>` | `i`, `n` | ハイライト解除 | 検索ハイライトをクリアしてノーマルモードへ |
| `<C-s>` | `i`, `v`, `n`, `s` | ファイル保存 | 現在のファイルを保存 |
| `<leader>qq` | `n` | 全て終了 | Neovimを終了 |

### カーソル移動（拡張）

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `j` | `n`, `x` | 下へ移動（論理） | 折り返し行を考慮した移動 |
| `k` | `n`, `x` | 上へ移動（論理） | 折り返し行を考慮した移動 |

### テキスト操作

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<A-j>` | `n`, `i`, `v` | 行を下に移動 | 現在行または選択行を下に移動 |
| `<A-k>` | `n`, `i`, `v` | 行を上に移動 | 現在行または選択行を上に移動 |
| `<` | `v` | 左インデント | 選択範囲を左にインデント（選択維持） |
| `>` | `v` | 右インデント | 選択範囲を右にインデント（選択維持） |

## ファイル・バッファ操作

### ファイル検索・操作

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>ff` | `n` | ファイル検索 | Telescopeでプロジェクト内ファイルを検索 |
| `<leader>fg` | `n` | テキスト検索 | プロジェクト内のテキストを検索（ripgrep） |
| `<leader>fb` | `n` | バッファ検索 | 現在開いているバッファから検索 |
| `<leader>fr` | `n` | 最近のファイル | 最近開いたファイル一覧 |
| `<leader>fh` | `n` | ヘルプ検索 | Neovimヘルプタグを検索 |
| `<leader>fc` | `n` | カラースキーム | 利用可能なカラースキームから選択 |
| `<leader>fm` | `n` | マーク検索 | 設定されたマークを検索 |
| `<leader>fk` | `n` | キーマップ検索 | 設定されたキーマップを検索 |
| `<leader>fs` | `n` | 文字列検索 | カーソル下の文字列をプロジェクト検索 |
| `<C-p>` | `n` | クイックファイル検索 | VS Code風クイックファイル検索 |
| `<leader>/` | `n` | プロジェクト検索 | テキスト検索のショートカット |

### ファイルエクスプローラー

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>e` | `n` | ファイラー開閉 | Neo-treeファイルエクスプローラーの表示切り替え |
| `<leader>E` | `n` | 現在ファイル表示 | Neo-treeで現在のファイルを表示 |

### ファイル作成・編集

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>fn` | `n` | 新規ファイル | 新しい空のバッファを作成 |

### バッファ管理

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<S-h>` | `n` | 前のバッファ | 前のバッファに切り替え |
| `<S-l>` | `n` | 次のバッファ | 次のバッファに切り替え |
| `[b` | `n` | 前のバッファ | 前のバッファに切り替え（代替） |
| `]b` | `n` | 次のバッファ | 次のバッファに切り替え（代替） |
| `<leader>bd` | `n` | バッファ削除 | 現在のバッファを削除 |
| `<leader>bD` | `n` | バッファ強制削除 | 変更を破棄してバッファを削除 |

### Bufferline専用操作

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>bp` | `n` | バッファピン | バッファをピン留め |
| `<leader>bP` | `n` | 非ピンバッファ削除 | ピン留めされていないバッファを全削除 |
| `<leader>bo` | `n` | 他バッファ削除 | 現在以外のバッファを全削除 |
| `<leader>br` | `n` | 右バッファ削除 | 右側のバッファを全削除 |
| `<leader>bl` | `n` | 左バッファ削除 | 左側のバッファを全削除 |

## ウィンドウ管理

### ウィンドウ移動

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<C-h>` | `n`, `t` | 左ウィンドウへ | 左のウィンドウに移動 |
| `<C-j>` | `n`, `t` | 下ウィンドウへ | 下のウィンドウに移動 |
| `<C-k>` | `n`, `t` | 上ウィンドウへ | 上のウィンドウに移動 |
| `<C-l>` | `n`, `t` | 右ウィンドウへ | 右のウィンドウに移動 |

### ウィンドウサイズ変更

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<C-Up>` | `n` | 高さ増加 | ウィンドウの高さを2行増加 |
| `<C-Down>` | `n` | 高さ減少 | ウィンドウの高さを2行減少 |
| `<C-Left>` | `n` | 幅減少 | ウィンドウの幅を2列減少 |
| `<C-Right>` | `n` | 幅増加 | ウィンドウの幅を2列増加 |

### ウィンドウ操作

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>ww` | `n` | 他ウィンドウ | 前回のウィンドウに移動 |
| `<leader>wd` | `n` | ウィンドウ削除 | 現在のウィンドウを削除 |
| `<leader>w-` | `n` | 水平分割 | ウィンドウを水平に分割 |
| `<leader>w\|` | `n` | 垂直分割 | ウィンドウを垂直に分割 |

### タブ操作

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader><tab>l` | `n` | 最後のタブ | 最後のタブに移動 |
| `<leader><tab>f` | `n` | 最初のタブ | 最初のタブに移動 |
| `<leader><tab><tab>` | `n` | 新規タブ | 新しいタブを作成 |
| `<leader><tab>]` | `n` | 次のタブ | 次のタブに移動 |
| `<leader><tab>[` | `n` | 前のタブ | 前のタブに移動 |
| `<leader><tab>d` | `n` | タブ削除 | 現在のタブを削除 |

## LSP機能

### 定義・参照ジャンプ

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `gd` | `n` | 定義へ移動 | シンボルの定義箇所に移動（Telescope） |
| `gr` | `n` | 参照一覧 | シンボルの参照箇所一覧表示（Telescope） |
| `gI` | `n` | 実装へ移動 | インターフェースの実装に移動（Telescope） |
| `gD` | `n` | 宣言へ移動 | シンボルの宣言に移動 |
| `<leader>D` | `n` | 型定義 | 型定義を表示（Telescope） |

### ドキュメント・情報表示

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `K` | `n` | ホバードキュメント | カーソル位置のシンボル情報を表示 |

### コード操作

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>ca` | `n` | コードアクション | 利用可能なコードアクションを表示 |
| `<leader>rn` | `n` | シンボル名変更 | シンボルの名前を変更（リファクタリング） |

### シンボル・ナビゲーション

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>ds` | `n` | ドキュメントシンボル | 現在ファイル内のシンボル一覧（Telescope） |
| `<leader>ws` | `n` | ワークスペースシンボル | プロジェクト内のシンボル一覧（Telescope） |

### 診断（エラー・警告）

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `[d` | `n` | 前の診断 | 前のエラー・警告に移動 |
| `]d` | `n` | 次の診断 | 次のエラー・警告に移動 |
| `<leader>e` | `n` | 診断フロート表示 | 現在行の診断をフローティングウィンドウで表示 |
| `<leader>q` | `n` | 診断リスト | 診断をLocation Listに表示 |

## Git操作

### Git GUI・基本操作

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>gg` | `n` | LazyGit | LazyGit GUI を起動 |
| `<leader>gs` | `n` | Git Status | Fugitive Git Status を表示 |
| `<leader>gc` | `n` | Git Commit | Git commit コマンド実行 |
| `<leader>gd` | `n` | Git Diff | Git diff を分割表示 |
| `<leader>gb` | `n` | Git Blame | Git blame を表示 |
| `<leader>gl` | `n` | Git Log | Git log を表示 |

### ハンク操作（Gitsigns）

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `]c` | `n` | 次のハンク | 次のGit変更箇所に移動 |
| `[c` | `n` | 前のハンク | 前のGit変更箇所に移動 |
| `<leader>hs` | `n`, `v` | ハンクステージ | 変更をステージングエリアに追加 |
| `<leader>hr` | `n`, `v` | ハンクリセット | 変更を取り消し |
| `<leader>hS` | `n` | バッファステージ | ファイル全体をステージ |
| `<leader>hu` | `n` | ステージ取り消し | ハンクのステージを取り消し |
| `<leader>hR` | `n` | バッファリセット | ファイル全体の変更を取り消し |
| `<leader>hp` | `n` | ハンクプレビュー | 変更内容をプレビュー表示 |
| `<leader>hb` | `n` | Blame行表示 | 現在行のGit blame情報を表示 |
| `<leader>tb` | `n` | Blame切り替え | 行ごとのblame情報表示を切り替え |
| `<leader>hd` | `n` | 差分表示 | 現在ファイルの差分を表示 |
| `<leader>hD` | `n` | 差分表示（HEAD~） | HEAD~との差分を表示 |
| `<leader>td` | `n` | 削除行表示切り替え | 削除された行の表示を切り替え |

### Git コンフリクト解決

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>co` | `n` | Oursを選択 | コンフリクト解決でOurs（現在ブランチ）を選択 |
| `<leader>ct` | `n` | Theirsを選択 | コンフリクト解決でTheirs（マージ元）を選択 |
| `<leader>cb` | `n` | 両方を選択 | コンフリクト解決で両方の変更を選択 |
| `<leader>c0` | `n` | なしを選択 | コンフリクト解決で両方を削除 |
| `]x` | `n` | 次のコンフリクト | 次のコンフリクト箇所に移動 |
| `[x` | `n` | 前のコンフリクト | 前のコンフリクト箇所に移動 |

### Git テキストオブジェクト

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `ih` | `o`, `x` | ハンク内選択 | Git ハンク（変更箇所）内を選択 |

## ターミナル

### ターミナル起動

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<C-\>` | `n` | フローティングターミナル | フローティングウィンドウでターミナル起動 |
| `<leader>tf` | `n` | フローティングターミナル | フローティングターミナル起動 |
| `<leader>th` | `n` | 水平ターミナル | 画面下部にターミナル起動 |
| `<leader>tv` | `n` | 垂直ターミナル | 画面右側にターミナル起動 |

### ターミナル内操作

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<Esc><Esc>` | `t` | ノーマルモード | ターミナルからノーマルモードに戻る |
| `jk` | `t` | ノーマルモード | ターミナルからノーマルモードに戻る（代替） |
| `<C-h>` | `t` | 左ウィンドウ | 左のウィンドウに移動 |
| `<C-j>` | `t` | 下ウィンドウ | 下のウィンドウに移動 |
| `<C-k>` | `t` | 上ウィンドウ | 上のウィンドウに移動 |
| `<C-l>` | `t` | 右ウィンドウ | 右のウィンドウに移動 |

## デバッグ

### デバッガー制御

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<F5>` | `n` | デバッグ開始/続行 | デバッガーを開始または実行を続行 |
| `<F1>` | `n` | ステップイン | 関数内部に入る |
| `<F2>` | `n` | ステップオーバー | 次の行に進む |
| `<F3>` | `n` | ステップアウト | 現在の関数から出る |
| `<F7>` | `n` | デバッガーUI切り替え | デバッグUIの表示/非表示 |

### ブレークポイント

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>b` | `n` | ブレークポイント切り替え | ブレークポイントの設定/解除 |
| `<leader>B` | `n` | 条件付きブレークポイント | 条件付きブレークポイントを設定 |

## 編集機能

### コメント

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `gcc` | `n` | 行コメント切り替え | 現在行のコメント状態を切り替え |
| `gc` | `n`, `o` | ラインワイズコメント | モーションでコメント切り替え |
| `gc` | `x` | 選択範囲コメント | 選択範囲のコメント切り替え |
| `gbc` | `n` | ブロックコメント切り替え | ブロックコメントを切り替え |
| `gb` | `n`, `o`, `x` | ブロックワイズコメント | ブロックコメント切り替え |
| `gco` | `n` | 下にコメント追加 | 下の行にコメント行を追加 |
| `gcO` | `n` | 上にコメント追加 | 上の行にコメント行を追加 |

### マルチカーソル（vim-visual-multi）

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<C-d>` | `n`, `v` | 次の同一単語選択 | カーソル下または選択中の単語と同じ単語を選択 |
| `<C-Down>` | `n` | カーソルを下に追加 | 下の行にカーソルを追加 |
| `<C-Up>` | `n` | カーソルを上に追加 | 上の行にカーソルを追加 |

### Surround操作

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `ys{motion}{char}` | `n` | テキストを囲む | モーションで指定したテキストを指定文字で囲む |
| `ds{char}` | `n` | 囲み文字削除 | 指定された囲み文字を削除 |
| `cs{old}{new}` | `n` | 囲み文字変更 | 囲み文字を変更 |

**例**:
- `ysiw"` - カーソル位置の単語を`"`で囲む
- `ds"` - `"`を削除
- `cs"'` - `"`を`'`に変更

### パラメーター操作

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>a` | `n` | 次のパラメーターと交換 | Tree-sitterを使用してパラメーターを交換 |
| `<leader>A` | `n` | 前のパラメーターと交換 | Tree-sitterを使用してパラメーターを交換 |

## 検索・ナビゲーション

### Flash（高速移動）

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `s` | `n`, `x`, `o` | Flash | 画面内の文字に高速ジャンプ |
| `S` | `n`, `o`, `x` | Flash Treesitter | Tree-sitter要素にジャンプ |
| `r` | `o` | Remote Flash | オペレーターモードでのリモートFlash |
| `R` | `o`, `x` | Treesitter検索 | Tree-sitterを使用した検索 |
| `<C-s>` | `c` | Flash検索切り替え | コマンドライン内でFlash検索切り替え |

### 選択範囲（Tree-sitter）

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<C-space>` | `n`, `x` | 選択範囲拡張 | Tree-sitterを使用して選択範囲を拡張 |
| `<BS>` | `x` | 選択範囲縮小 | 選択範囲を縮小 |

### Tree-sitter テキストオブジェクト

#### 選択
| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `aa` | `o`, `x` | パラメーター全体 | 関数のパラメーター（括弧含む） |
| `ia` | `o`, `x` | パラメーター内部 | 関数のパラメーター（括弧除く） |
| `af` | `o`, `x` | 関数全体 | 関数定義全体 |
| `if` | `o`, `x` | 関数内部 | 関数の内容のみ |
| `ac` | `o`, `x` | クラス全体 | クラス定義全体 |
| `ic` | `o`, `x` | クラス内部 | クラスの内容のみ |
| `ai` | `o`, `x` | 条件文全体 | if文等の全体 |
| `ii` | `o`, `x` | 条件文内部 | if文等の内容のみ |
| `al` | `o`, `x` | ループ全体 | for/while文等の全体 |
| `il` | `o`, `x` | ループ内部 | for/while文等の内容のみ |
| `at` | `o`, `x` | コメント全体 | コメントブロック全体 |

#### 移動
| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `]m` | `n` | 次の関数開始 | 次の関数の開始に移動 |
| `]M` | `n` | 次の関数終了 | 次の関数の終了に移動 |
| `[m` | `n` | 前の関数開始 | 前の関数の開始に移動 |
| `[M` | `n` | 前の関数終了 | 前の関数の終了に移動 |
| `]]` | `n` | 次のクラス開始 | 次のクラスの開始に移動 |
| `][` | `n` | 次のクラス終了 | 次のクラスの終了に移動 |
| `[[` | `n` | 前のクラス開始 | 前のクラスの開始に移動 |
| `[]` | `n` | 前のクラス終了 | 前のクラスの終了に移動 |

### TODOコメント

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `]t` | `n` | 次のTODO | 次のTODOコメントに移動 |
| `[t` | `n` | 前のTODO | 前のTODOコメントに移動 |

## UI操作

### 通知・メッセージ

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>un` | `n` | 通知を閉じる | 表示中の全通知を閉じる |

### Tree-sitterコンテキスト

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>ut` | `n` | コンテキスト切り替え | Tree-sitterコンテキスト表示の切り替え |

### Trouble（診断表示）

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>xx` | `n` | Trouble切り替え | Trouble診断パネルの表示切り替え |
| `<leader>xw` | `n` | ワークスペース診断 | ワークスペース全体の診断を表示 |
| `<leader>xd` | `n` | ドキュメント診断 | 現在ファイルの診断を表示 |
| `<leader>xl` | `n` | ロケーションリスト | Location Listを表示 |
| `<leader>xq` | `n` | クイックフィックス | Quickfix Listを表示 |
| `<leader>xt` | `n` | TODO Trouble | TODOコメント一覧をTroubleで表示 |
| `<leader>xT` | `n` | TODO/FIX Trouble | TODO/FIX/FIXMEをTroubleで表示 |
| `gR` | `n` | LSP参照 Trouble | LSP参照をTroubleで表示 |

### Telescope TODO

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>st` | `n` | TODO検索 | TODOコメントをTelescopeで検索 |
| `<leader>sT` | `n` | TODO/FIX検索 | TODO/FIX/FIXMEをTelescopeで検索 |

## プラグイン管理

### Lazy.nvim

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>l` | `n` | Lazy管理画面 | プラグイン管理画面を開く |

### Mason

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>cm` | `n` | Mason管理画面 | LSP/DAP/リンター管理画面を開く |

## セッション管理

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>qs` | `n` | セッション復元 | 現在ディレクトリのセッションを復元 |
| `<leader>ql` | `n` | 最新セッション復元 | 最後のセッションを復元 |
| `<leader>qd` | `n` | セッション保存停止 | 現在セッションの保存を停止 |

## プロジェクト管理

| キー | モード | 動作 | 説明 |
|------|--------|------|------|
| `<leader>fp` | `n` | プロジェクト選択 | 検出されたプロジェクト一覧から選択 |

## 特殊なモード・コンテキスト

### Neo-tree内操作

Neo-treeが開いている時の専用キーマップ：

| キー | 動作 | 説明 |
|------|------|------|
| `<CR>` | 開く | ファイル/フォルダーを開く |
| `<Space>` | 展開切り替え | ノードの展開/折りたたみ |
| `<2-LeftMouse>` | 開く | ダブルクリックで開く |
| `P` | プレビュー | プレビュー表示切り替え |
| `l` | プレビューフォーカス | プレビューにフォーカス |
| `S` | 水平分割で開く | 水平分割でファイルを開く |
| `s` | 垂直分割で開く | 垂直分割でファイルを開く |
| `t` | タブで開く | 新しいタブでファイルを開く |
| `w` | ウィンドウピッカー | ウィンドウを選択して開く |
| `C` | ノードを閉じる | 現在ノードを閉じる |
| `z` | 全ノード閉じる | 全てのノードを閉じる |
| `a` | ファイル追加 | 新しいファイルを作成 |
| `A` | ディレクトリ追加 | 新しいディレクトリを作成 |
| `d` | 削除 | ファイル/ディレクトリを削除 |
| `r` | 名前変更 | ファイル/ディレクトリ名を変更 |
| `y` | クリップボードコピー | パスをクリップボードにコピー |
| `x` | クリップボードカット | ファイルをカット |
| `p` | クリップボードペースト | ファイルをペースト |
| `c` | コピー | ファイルをコピー |
| `m` | 移動 | ファイルを移動 |
| `q` | 閉じる | Neo-treeを閉じる |
| `R` | 更新 | 表示を更新 |
| `?` | ヘルプ | ヘルプを表示 |
| `H` | 隠しファイル切り替え | 隠しファイル表示切り替え |
| `/` | ファジー検索 | ファイルをファジー検索 |
| `<BS>` | 上の階層 | 親ディレクトリに移動 |
| `.` | ルート設定 | 現在ディレクトリをルートに設定 |

### Telescope内操作

Telescopeが開いている時の専用キーマップ：

| キー | 動作 | 説明 |
|------|------|------|
| `<C-k>` | 上の項目 | 前の検索結果に移動 |
| `<C-j>` | 下の項目 | 次の検索結果に移動 |
| `<C-q>` | クイックフィックス | 結果をクイックフィックスリストに送信 |
| `<Esc>` | 閉じる | Telescopeを閉じる |
| `<CR>` | 選択 | 選択した項目を開く |
| `<C-x>` | 水平分割 | 水平分割で開く |
| `<C-v>` | 垂直分割 | 垂直分割で開く |
| `<C-t>` | タブ | タブで開く |

この包括的なキーバインドリファレンスにより、Modern Neovim Configurationの全機能を効率的に活用できます。